# Moto Trip Organizer - Complete File Structure

## Solution Root
```
MotoTripOrganizer/
├── MotoTripOrganizer.sln              # Solution file
├── README.md                          # Project documentation
├── MIGRATIONS.md                      # EF Core migration guide
├── .gitignore                         # Git ignore rules
├── docker-compose.yml                 # Docker compose for local dev
│
├── src/                               # Source code
│   ├── MotoTripOrganizer.Domain/
│   │   ├── MotoTripOrganizer.Domain.csproj
│   │   ├── Entities/
│   │   │   ├── User.cs               # User entity
│   │   │   ├── Trip.cs               # Trip aggregate root
│   │   │   ├── TripMember.cs         # Trip membership
│   │   │   ├── Stage.cs              # Trip stage/leg
│   │   │   ├── Item.cs               # Notes/links/hotels
│   │   │   ├── Expense.cs            # Expense tracking
│   │   │   └── Attachment.cs         # File attachments
│   │   ├── Enums/
│   │   │   ├── TripMemberRole.cs     # Owner/Editor/Viewer
│   │   │   └── ItemType.cs           # Note/Link/Hotel
│   │   └── Exceptions/
│   │       └── TripAccessDeniedException.cs  # 403 exception
│   │
│   ├── MotoTripOrganizer.Application/
│   │   ├── MotoTripOrganizer.Application.csproj
│   │   ├── DTOs/
│   │   │   ├── UserDto.cs            # User DTOs
│   │   │   ├── TripDto.cs            # Trip DTOs
│   │   │   ├── StageDto.cs           # Stage DTOs
│   │   │   ├── ItemDto.cs            # Item DTOs
│   │   │   └── ExpenseDto.cs         # Expense DTOs
│   │   ├── Services/
│   │   │   ├── TripAuthorizationService.cs  # "Trip is sacred" enforcement
│   │   │   ├── UserService.cs        # User operations
│   │   │   └── TripService.cs        # Trip operations
│   │   └── Validators/
│   │       └── RequestValidators.cs  # FluentValidation rules
│   │
│   ├── MotoTripOrganizer.Infrastructure/
│   │   ├── MotoTripOrganizer.Infrastructure.csproj
│   │   ├── Data/
│   │   │   ├── ApplicationDbContext.cs      # EF Core DbContext
│   │   │   ├── DbSeeder.cs                  # Development seed data
│   │   │   ├── Configurations/
│   │   │   │   ├── UserConfiguration.cs     # User entity config
│   │   │   │   ├── TripConfiguration.cs     # Trip entity config
│   │   │   │   ├── TripMemberConfiguration.cs
│   │   │   │   ├── StageConfiguration.cs    # RowVersion config
│   │   │   │   ├── ItemConfiguration.cs     # RowVersion config
│   │   │   │   ├── ExpenseConfiguration.cs  # RowVersion config
│   │   │   │   └── AttachmentConfiguration.cs
│   │   │   └── Migrations/                  # (generated by EF)
│   │   ├── Repositories/
│   │   │   ├── Repository.cs         # Generic repository
│   │   │   └── UnitOfWork.cs         # Unit of Work pattern
│   │   ├── Storage/
│   │   │   └── BlobStorageService.cs # Azure Blob Storage
│   │   └── Auth/
│   │       └── CurrentUserService.cs # JWT claims reader
│   │
│   └── MotoTripOrganizer.Api/
│       ├── MotoTripOrganizer.Api.csproj
│       ├── Program.cs                # Startup configuration
│       ├── Dockerfile                # Docker build file
│       ├── appsettings.json          # Production settings
│       ├── appsettings.Development.json  # Dev settings
│       ├── Controllers/
│       │   ├── MeController.cs       # /api/me/bootstrap
│       │   ├── TripsController.cs    # /api/trips
│       │   ├── StagesController.cs   # /api/trips/{id}/stages
│       │   ├── ItemsController.cs    # /api/trips/{id}/items
│       │   └── ExpensesController.cs # /api/trips/{id}/expenses
│       └── Middleware/
│           └── ExceptionHandlingMiddleware.cs  # Global error handler
│
└── tests/
    └── MotoTripOrganizer.Tests/
        ├── MotoTripOrganizer.Tests.csproj
        └── Domain/
            └── TripTests.cs          # Sample unit tests
```

## Key Files Summary

### Domain Layer (10 files)
- 7 Entity classes (User, Trip, TripMember, Stage, Item, Expense, Attachment)
- 2 Enums (TripMemberRole, ItemType)
- 1 Exception (TripAccessDeniedException)

### Application Layer (9 files)
- 5 DTO files with request/response models
- 3 Service classes (TripAuthorizationService, UserService, TripService)
- 1 Validator file with FluentValidation rules

### Infrastructure Layer (13 files)
- 1 DbContext
- 8 Entity configurations with relationships and indexes
- 1 DbSeeder for development data
- 2 Repository classes (Repository, UnitOfWork)
- 1 BlobStorageService for Azure Storage
- 1 CurrentUserService for JWT claims

### API Layer (9 files)
- 1 Program.cs with complete DI setup
- 5 Controllers (Me, Trips, Stages, Items, Expenses)
- 1 ExceptionHandlingMiddleware
- 2 Configuration files (appsettings)
- 1 Dockerfile

### Root Files (5 files)
- Solution file (.sln)
- README.md with full documentation
- MIGRATIONS.md with EF Core commands
- .gitignore
- docker-compose.yml

### Test Project (1 file)
- Sample domain tests

## Total: ~47 code files

## Technology Highlights

✅ Clean Architecture (4 layers)
✅ "Trip is sacred" authorization enforcement
✅ "No community" data isolation
✅ EF Core Code First with SQL Server
✅ Auth0 JWT authentication
✅ Azure Blob Storage integration
✅ FluentValidation
✅ Serilog structured logging
✅ Health checks
✅ Swagger/OpenAPI
✅ Docker support
✅ Optimistic concurrency (RowVersion)
✅ ProblemDetails error handling
✅ Async/await throughout

## Next Steps

1. **Setup Auth0**: Create application and configure JWT
2. **Run Migrations**: Generate and apply initial database schema
3. **Configure Storage**: Set up Azure Storage or Azurite
4. **Test Locally**: Use docker-compose for SQL Server
5. **Deploy**: Azure App Service + Azure SQL Database + Azure Blob Storage
